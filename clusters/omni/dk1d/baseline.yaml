---
# Cluster Template: dk1d-baseline
# Site: dk1d
# Environment: development
# Created: Mon Dec 22 05:47:34 UTC 2025
#
# Apply with omnictl cluster template:
#   omnictl cluster template sync -f baseline.yaml
#
# Or use the helper script:
#   ./scripts/apply-cluster.sh baseline.yaml

kind: Cluster
name: dk1d-baseline
kubernetes:
  version: v1.30.0
talos:
  version: v1.9.0
features:
  enableWorkloadProxy: true
  diskEncryption: false
  useEmbeddedDiscoveryService: true

---
kind: ControlPlane
machineClass:
  name: dk1d-baseline-cp
  size: 1
  matchLabels:
    site: dk1d
    platform: proxmox
    size: 2x4

---
kind: Workers
machineClass:
  name: dk1d-baseline-workers
  size: 3
  matchLabels:
    site: dk1d
    platform: proxmox
    size: 2x4

---
# Resource requirements for Terraform
# These values should match your terraform.tfvars configuration

# Node specifications:
# - Control Planes: 1
# - Workers: 3
# - Total Nodes: 4
# - Size Class: 2x4
#
# Per-node resources:
# - CPU: 2 cores
# - Memory: 4096 MB
# - Disk: 50 GB
#
# Total resources:
# - CPU: 8 cores
# - Memory: 16384 MB (16 GB)
# - Disk: 200 GB

# Update terraform/proxmox/terraform.tfvars.dk1d:
#   node_count     = 4
#   node_cpu       = 2
#   node_memory    = 4096
#   node_disk_size = 50

# To add machine patches, create separate patch files:
# 1. Create patches/dk1d-baseline-patch.yaml with Talos machine config
# 2. Add to template:
#    patches:
#      - file: patches/dk1d-baseline-patch.yaml
