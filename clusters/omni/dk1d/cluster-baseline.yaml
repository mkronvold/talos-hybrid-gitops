---
# Cluster Template: dk1d-baseline
# Site: dk1d
# Environment: development
# Created: Mon Dec 22 06:48:30 UTC 2025
#
# Apply with omnictl cluster template:
#   omnictl cluster template sync -f cluster-baseline.yaml
#
# Or use the helper script:
#   ./scripts/apply-cluster.sh cluster-baseline.yaml

kind: Cluster
name: dk1d-baseline
kubernetes:
  version: v1.30.0
talos:
  version: v1.9.0
features:
  enableWorkloadProxy: true
  diskEncryption: false
  useEmbeddedDiscoveryService: true

---
kind: ControlPlane
machineClass:
  name: dk1d-baseline-cp
  size: 3
  matchLabels:
    site: dk1d
    platform: proxmox
    size: 4x8

---
kind: Workers
machineClass:
  name: dk1d-baseline-workers
  size: 5
  matchLabels:
    site: dk1d
    platform: proxmox
    size: 4x8

---
# Resource requirements for Terraform
# These values should match your terraform.tfvars configuration

# Node specifications:
# - Control Planes: 3
# - Workers: 5
# - Total Nodes: 8
# - Size Class: 4x8
#
# Per-node resources:
# - CPU: 4 cores
# - Memory: 8192 MB
# - Disk: 50 GB
#
# Total resources:
# - CPU: 32 cores
# - Memory: 65536 MB (64 GB)
# - Disk: 400 GB

# Update terraform/proxmox/terraform.tfvars.dk1d:
#   node_count     = 8
#   node_cpu       = 4
#   node_memory    = 8192
#   node_disk_size = 50

# To add machine patches, create separate patch files:
# 1. Create patches/dk1d-baseline-patch.yaml with Talos machine config
# 2. Add to template:
#    patches:
#      - file: patches/dk1d-baseline-patch.yaml
